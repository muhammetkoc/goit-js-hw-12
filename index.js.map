{"version":3,"file":"index.js","sources":["../src/js/app.js"],"sourcesContent":["import axios from 'axios';\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nconst API_KEY = \"48286639-c5b13cd121e9f124dcf0b461d\";\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\nlet lightbox;\r\nlet pageNum = 1;\r\nlet searchQuery = \"\";\r\nlet totalImages = 0;\r\nconst imagesPerPage = 40;\r\n\r\nconst gallery = document.querySelector('.gallery');\r\nconst searchForm = document.querySelector('.searchForm');\r\nconst loaderOverlay = document.getElementById('loaderOverlay');\r\nconst loader = document.getElementById('loader');\r\nconst loadBtnContainer = document.querySelector('.load-btn-container');\r\nconst loadMoreBtn = document.createElement('button');\r\nloadMoreBtn.textContent = 'Load more';\r\nloadMoreBtn.classList.add('load-btn');\r\nloadBtnContainer.appendChild(loadMoreBtn);\r\n\r\nfunction showLoader() {\r\n  loaderOverlay.classList.add('active');\r\n  loader.classList.remove('loader-hidden');\r\n}\r\n\r\nfunction hideLoader() {\r\n  loaderOverlay.classList.remove('active');\r\n  loader.classList.add('loader-hidden');\r\n}\r\n\r\nfunction hideLoadBtn() {\r\n  loadMoreBtn.style.display = 'none';\r\n}\r\n\r\nfunction showLoadBtn() {\r\n  loadMoreBtn.style.display = 'block';\r\n}\r\n\r\nfunction scrollPage() {\r\n  const galleryItem = document.querySelector('.gallery-item');\r\n  if (!galleryItem) return;\r\n  \r\n  const cardHeight = galleryItem.getBoundingClientRect().height;\r\n  window.scrollBy({\r\n    top: cardHeight * 2,\r\n    behavior: 'smooth'\r\n  });\r\n}\r\n\r\nasync function getImages(query, page) {\r\n  const params = new URLSearchParams({\r\n    key: API_KEY,\r\n    q: query,\r\n    image_type: \"photo\",\r\n    orientation: \"horizontal\",\r\n    safesearch: true,\r\n    per_page: imagesPerPage,\r\n    page: page\r\n  });\r\n\r\n  try {\r\n    const response = await axios.get(`${BASE_URL}?${params}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    throw new Error(error.message);\r\n  }\r\n}\r\n\r\nfunction displayImages(images) {\r\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => \r\n    `<li class=\"gallery-item\">\r\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\r\n        <img\r\n          class=\"gallery-image\"\r\n          src=\"${webformatURL}\"\r\n          alt=\"${tags}\"\r\n          title=\"${tags}\"\r\n        />\r\n        <ul class=\"img-information\">\r\n          <li>\r\n            <span class=\"img-information-title\">Likes</span>\r\n            <span class=\"img-information-content\">${likes}</span>\r\n          </li>\r\n          <li>\r\n            <span class=\"img-information-title\">View</span>\r\n            <span class=\"img-information-content\">${views}</span>\r\n          </li>\r\n          <li>\r\n            <span class=\"img-information-title\">Comments</span>\r\n            <span class=\"img-information-content\">${comments}</span>\r\n          </li>\r\n          <li>\r\n            <span class=\"img-information-title\">Downloads</span>\r\n            <span class=\"img-information-content\">${downloads}</span>\r\n          </li>\r\n        </ul>\r\n      </a>\r\n    </li>`\r\n  ).join('');\r\n\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n  \r\n  if (lightbox) {\r\n    lightbox.refresh();\r\n  } else {\r\n    lightbox = new SimpleLightbox('.gallery a', {\r\n      captions: true,\r\n      captionSelector: 'img',\r\n      captionType: 'attr',\r\n      captionsData: 'title',\r\n      captionPosition: 'bottom',\r\n      captionDelay: 250,\r\n      closeText: 'Ã—',\r\n      navText: ['&larr;', '&rarr;'],\r\n      overlayOpacity: 0.9,\r\n      spinner: true,\r\n      alertError: false\r\n    });\r\n  }\r\n}\r\n\r\nasync function onFormSubmit(e) {\r\n  e.preventDefault();\r\n  showLoader();\r\n  hideLoadBtn();\r\n  \r\n  const searchInput = document.querySelector('.search-input');\r\n  const query = searchInput.value.trim();\r\n  \r\n  if (!query) {\r\n    hideLoader();\r\n    iziToast.warning({\r\n      message: \"Please enter a search term\",\r\n      position: \"topRight\"\r\n    });\r\n    return;\r\n  }\r\n\r\n  gallery.innerHTML = '';\r\n  searchQuery = query;\r\n  pageNum = 1;\r\n\r\n  try {\r\n    const data = await getImages(searchQuery, pageNum);\r\n    totalImages = data.totalHits;\r\n    \r\n    if (data.hits.length === 0) {\r\n      iziToast.warning({\r\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\r\n        position: \"topRight\"\r\n      });\r\n      return;\r\n    }\r\n    \r\n    displayImages(data.hits);\r\n    \r\n    if (data.totalHits > imagesPerPage) {\r\n      showLoadBtn();\r\n    }\r\n  } catch (error) {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: `Something went wrong: ${error.message}`,\r\n      position: 'topRight'\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n    searchForm.reset();\r\n  }\r\n}\r\n\r\nasync function onLoadMoreClick() {\r\n  showLoader();\r\n  pageNum++;\r\n  \r\n  try {\r\n    const data = await getImages(searchQuery, pageNum);\r\n    displayImages(data.hits);\r\n    \r\n    if (pageNum * imagesPerPage >= totalImages) {\r\n      hideLoadBtn();\r\n      iziToast.info({\r\n        message: \"We're sorry, but you've reached the end of search results.\",\r\n        position: 'topRight'\r\n      });\r\n    }\r\n    \r\n    scrollPage();\r\n  } catch (error) {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: `Something went wrong: ${error.message}`,\r\n      position: 'topRight'\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nsearchForm.addEventListener('submit', onFormSubmit);\r\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\r\nhideLoadBtn();"],"names":["API_KEY","BASE_URL","lightbox","pageNum","searchQuery","totalImages","imagesPerPage","gallery","searchForm","loaderOverlay","loader","loadBtnContainer","loadMoreBtn","showLoader","hideLoader","hideLoadBtn","showLoadBtn","scrollPage","galleryItem","cardHeight","getImages","query","page","params","axios","error","displayImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","onFormSubmit","e","iziToast","data","onLoadMoreClick"],"mappings":"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"}